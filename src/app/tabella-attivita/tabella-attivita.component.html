<!--
    <p-table [value]="attivita">
        <ng-template pTemplate="header">
            <tr>
                <th>Priorit√†</th>
                <th>Tipo</th>
                <th>Azienda</th>
                <th>Applicazione</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-attivita>
            <tr>
                <td>{{attivita.priorita}}</td>
                <td>{{attivita.tipo}}</td>
                <td>{{attivita.azienda}}</td>
                <td>{{attivita.applicazione}}</td>
            </tr>
        </ng-template>
    </p-table>
-->
<p-table #dt 
    [value]="attivita" 
    [columns]="cols" [rows]="10" 
    [paginator]="true" [autoLayout]="true" 
    [rowsPerPageOptions]="[5,10,15,20]"
    [lazy]="true" 
    (onLazyLoad)="handleEvent('onLazyLoad', $event)" 
    [totalRecords]="totalRecords"
    selectionMode="single"
    (onRowSelect)="handleEvent('onRowSelect', $event)"
    >


    <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
            <col *ngFor="let col of columns">
        </colgroup>
    </ng-template>


    <ng-template pTemplate="header" let-columns>
        <tr>
            <th *ngFor="let col of columns">
                <div *ngIf="col.field != undefined" [pSortableColumn]="col.field">
                    {{col.header}}
                    <p-sortIcon [field]="col.field" ariaLabelAsc="Colonnna {{col.header}}, Ordinamento ascendente" ariaLabelDesc="Colonnna {{col.header}}, Ordinamento discendente">
                    </p-sortIcon>
                </div>
            </th>
        </tr>
        <tr>
            <td *ngFor="let col of columns" [ngSwitch]="col.filterWidget">
                <div *ngIf="col.field != undefined">
                    <p-calendar #calGen *ngSwitchCase="'Calendar'" [(ngModel)]="dataRange[col.field]" placeholder="Scegli..." showButtonBar="true"
                        [locale]="localIt" [showIcon]="false" dateFormat="dd/mm/yy" (onSelect)="onCalendarAction($event, col.field, 'select')"
                        (onClearClick)="onCalendarAction($event, col.field, 'clear')" (onTodayClick)="onCalendarAction($event, col.field, 'today')"
                        appendTo="body" selectionMode="range" readonlyInput="true" [pTooltip]="calendarTooltip(col.field)" inputId="CalInput_{{col.field}}">
                    </p-calendar>
                    <input *ngSwitchDefault pInputText attr.aria-label="Colonnna {{col.header}}, Cella filtro" type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)"
                        style="width:100%" #filterInputText>
                </div>
            </td>

        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-attivita>
        <tr class="row-class" [pSelectableRow]="rowData">
            <td>
                <img *ngIf="attivita.priorita===1" src="assets/images/outline_flag_black_48dp.png" alt="priorita" class="img-table">
                <img *ngIf="attivita.priorita===2" src="assets/images/baseline_flag_black_48dp.png" alt="priorita" class="img-table">
                <!-- <button pButton icon="pi pi-pencil" (click)="selectWithButton(rowData)"></button> -->
            </td>
            <td class="column-class">{{attivita.tipo}}</td>
            <td class="column-class">{{attivita.idAzienda.nome}}</td>
            <td class="column-class">{{attivita.idApplicazione.nome}}</td>
            <td class="column-class">{{attivita.mittente}}</td>
            <td class="column-class">{{attivita.oggetto}}</td>
            <td class="column-class">{{attivita.dataInserimentoRiga | date:'dd/MM/yyyy'}}</td>
            <td class="column-class">{{attivita.descrizione}}</td>
            <td>
                <a class="openTabLink" *ngIf="attivita.tipo==='attivita'" (click)="apriAttivita(attivita)">Apri</a>
            </td>
            <td>
                <img *ngIf="attivita.aperta" src="assets/images/orange-circle-md.png" alt="prendi" class="img-table">
                <!-- <button pButton icon="pi pi-pencil" (click)="selectWithButton(rowData)"></button> -->
            </td>
            <td>
                <img *ngIf="attivita.note" src="assets/images/baseline_notes_black_48dp.png" alt="note" class="img-table">
                <!-- <button pButton icon="pi pi-trash" (click)="deleteWithButton(rowData)"></button> -->
            </td>
        </tr>

    </ng-template>

</p-table>